<% layout('layout/boilerplate') -%>

<div class="container my-5">
  <h1 class="mb-4 text-center text-primary fw-bold"><%= board.name %></h1>

  <!-- Pins Section -->
  <div class="row g-4 justify-content-center">
    <% if (board.pins.length === 0) { %>
      <p class="text-center text-muted">No pins yet.</p>
    <% } else { %>
      <% board.pins.forEach(pin => { %>
        <div class="col-sm-6 col-md-4 col-lg-3">
          <div class="card pin-card shadow-sm border-0 h-100">
            <% if (pin.image) { %>
              <div class="ratio ratio-1x1">
                <img src="<%= pin.image %>" class="card-img-top rounded-top-4" alt="<%= pin.title %>">
              </div>
            <% } %>
            <div class="card-body d-flex flex-column">
              <h5 class="card-title fw-semibold text-dark text-truncate"><%= pin.title %></h5>
              
              <% if (pin.description) { %>
                <p class="card-text text-muted small text-truncate-2"><%= pin.description %></p>
              <% } %>

              <div class="mt-auto d-flex justify-content-between">
                <a href="/boards/<%= board._id %>/pins/<%= pin._id %>/edit" class="btn btn-sm btn-outline-primary rounded-pill px-3">
                  <i class="fa-solid fa-pen"></i>
                </a>
                <form action="/boards/<%= board._id %>/pins/<%= pin._id %>?_method=DELETE" method="POST" onsubmit="return confirm('Are you sure you want to delete this pin?');">
                  <button type="submit" class="btn btn-sm btn-outline-danger rounded-pill px-3">
                    <i class="fa-solid fa-trash"></i>
                  </button>
                </form>
              </div>
            </div>
          </div>
        </div>
      <% }) %>
    <% } %>
  </div>

  <div class="text-center mt-5">
    <a href="/boards/<%= board._id %>/pins/new" class="btn btn-success btn-lg rounded-pill px-4">
      <i class="fa-solid fa-plus me-2"></i>Add New Pin
    </a>
  </div>
</div>

<!-- Font Awesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
  /* Card shape and hover animation */
  .pin-card {
    border-radius: 1rem;
    overflow: hidden;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .pin-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
  }

  /* Truncate long text */
  .text-truncate-2 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
  }

  /* Body background */
  body {
    background-color: #f4f6f9;
  }
</style>
